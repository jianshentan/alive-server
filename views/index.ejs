<!DOCTYPE html>
<html>
  <head>
  </head>
  <body>
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>

    username: <span id="username"></span>
    <div class="emit-btn" onclick="emit()">EMIT</div>
    <div class="room1" onclick="joinRoom('54d1b11df515f3b44f6cd13e')">JOIN (room1)</div>
    <div class="room2" onclick="joinRoom(2)">JOIN (room2)</div>
    <div class="room1" onclick="leaveRoom('54d1b11df515f3b44f6cd13e')">EXIT (room1)</div>
    <div class="room1" onclick="leaveRoom(2)">EXIT (room2)</div>

    <hr>
    LOG: 
    <div class="user_log"></div> 
    <hr>
    USER LIST IN CURRENT ROOM: 
    <div class="user_list"></div>

    <script>
      var js = "54d1b11cf515f3b44f6cd13a";
      var minsoo = "54d1b11df515f3b44f6cd13b";
      var pete = "54d1b11cf515f3b44f6cd13c";
      var userId = js;
      $( "#username" ).html( userId );

      var socket = io();
 
      openConnection();
      function openConnection() {
        socket.emit( 'enter', { user: userId } );
      }

      function joinRoom( room ) {
        socket.emit( 'join', { room: room } );
      };
      function leaveRoom( room ) {
        socket.emit( 'leave', { room: room } );
      }

      socket.on( 'user joined', function( user ) {
        $( ".user_log" ).append( "<div>"+user+" joined</div>" );
      });

      socket.on( 'user left', function( user ) {
        $( ".user_log" ).append( "<div>"+user+" left</div>" );
        $( ".user_list" ).html( "" );
      });

      socket.on( 'user list', function( users ) {
        $( ".user_list" ).html( "" );
        for( var i in users ) {
          $( ".user_list" ).append( "<div>"+users[i]+"</div>" );
        }
      });
    </script>

  </body>
</html>
